// Backbone.Syphon, v0.5.0
// Copyright (c) 2014 Derick Bailey, Muted Solutions, LLC.
// Distributed under MIT license
// http://github.com/marionettejs/backbone.syphon

!function(a,b){if("function"==typeof define&&define.amd)define(["underscore","jquery"],function(a,c){return b(a,c)});else if("undefined"!=typeof exports){var c=require("underscore"),d=require("jquery");module.exports=b(c,d)}else b(a._,a.jQuery)}(this,function(a,b){"use strict";var c=d,d=window.Syphon={};d.VERSION="0.5.0",d.noConflict=function(){return d=c,this};var e=function(b,c){var d,e=this;d=b&&a.has(b,"constructor")?b.constructor:function(){return e.apply(this,arguments)},a.extend(d,e,c);var f=function(){this.constructor=d};return f.prototype=e.prototype,d.prototype=new f,b&&a.extend(d.prototype,b),d.__super__=e.prototype,d};d.ignoredTypes=["button","submit","reset","fieldset"],d.serialize=function(c,d){var e={},h=i(d),k=f(c,h);return a.each(k,function(a){var c=b(a),d=g(c),f=h.keyExtractors.get(d),i=f(c),k=h.inputReaders.get(d),l=k(c),m=h.keyAssignmentValidators.get(d);if(m(c,i,l)){var n=h.keySplitter(i);e=j(e,n,l)}}),e},d.deserialize=function(c,d,e){var h=i(e),j=f(c,h),l=k(h,d);a.each(j,function(a){var c=b(a),d=g(c),e=h.keyExtractors.get(d),f=e(c),i=h.inputWriters.get(d),j=l[f];i(c,j)})};var f=function(c,d){var e=h(c),f=e.elements;return f=a.reject(f,function(c){var e,f=g(c),h=d.keyExtractors.get(f),i=h(b(c)),j=a.include(d.ignoredTypes,f),k=a.include(d.include,i),l=a.include(d.exclude,i);return e=k?!1:d.include?!0:l||j})},g=function(a){var c,d=b(a),e=d[0].tagName,f=e;return"input"===e.toLowerCase()&&(c=d.attr("type"),f=c?c:"text"),f.toLowerCase()},h=function(b){return a.isUndefined(b.$el)&&"form"===b.tagName.toLowerCase()?b:b.$el.is("form")?b.el:b.$("form")[0]},i=function(b){var c=a.clone(b)||{};return c.ignoredTypes=a.clone(d.ignoredTypes),c.inputReaders=c.inputReaders||d.InputReaders,c.inputWriters=c.inputWriters||d.InputWriters,c.keyExtractors=c.keyExtractors||d.KeyExtractors,c.keySplitter=c.keySplitter||d.KeySplitter,c.keyJoiner=c.keyJoiner||d.KeyJoiner,c.keyAssignmentValidators=c.keyAssignmentValidators||d.KeyAssignmentValidators,c},j=function(b,c,d){if(!c)return b;var e=c.shift();return b[e]||(b[e]=a.isArray(e)?[]:{}),0===c.length&&(a.isArray(b[e])?b[e].push(d):b[e]=d),c.length>0&&j(b[e],c,d),b},k=function(b,c,d){var e={};return a.each(c,function(c,f){var g={};d&&(f=b.keyJoiner(d,f)),a.isArray(c)?(f+="[]",g[f]=c):a.isObject(c)?g=k(b,c,f):g[f]=c,a.extend(e,g)}),e},l=d.TypeRegistry=function(){this.registeredTypes={}};a.extend(l.prototype,{get:function(a){return this.registeredTypes[a]||this.registeredTypes["default"]},register:function(a,b){this.registeredTypes[a]=b},registerDefault:function(a){this.registeredTypes["default"]=a},unregister:function(a){this.registeredTypes[a]&&delete this.registeredTypes[a]}}),d.TypeRegistry.extend=e;var m=d.KeyExtractorSet=l.extend(),n=d.KeyExtractors=new m;n.registerDefault(function(a){return a.prop("name")||""});var o=d.InputReaderSet=l.extend(),p=d.InputReaders=new o;p.registerDefault(function(a){return a.val()}),p.register("checkbox",function(a){return a.prop("checked")});var q=d.InputWriterSet=l.extend(),r=d.InputWriters=new q;r.registerDefault(function(a,b){a.val(b)}),r.register("checkbox",function(a,b){a.prop("checked",b)}),r.register("radio",function(a,b){a.prop("checked",a.val()===b.toString())});var s=d.KeyAssignmentValidatorSet=l.extend(),t=d.KeyAssignmentValidators=new s;return t.registerDefault(function(){return!0}),t.register("radio",function(a){return a.prop("checked")}),d.KeySplitter=function(a){var b,c=a.match(/[^\[\]]+/g);return a.indexOf("[]")===a.length-2&&(b=c.pop(),c.push([b])),c},d.KeyJoiner=function(a,b){return a+"["+b+"]"},d});
//# sourceMappingURL=syphon.min.map